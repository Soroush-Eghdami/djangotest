{% extends "_base.html" %}

{% block content %}
<section class="page-title bg-1">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="block text-center">
          <span class="text-white">Our blog</span>
          <h1 class="text-capitalize mb-4 text-lg">Blog articles</h1>
          <ul class="list-inline">
            <li class="list-inline-item"><a href="index.html" class="text-white">Home</a></li>
            <li class="list-inline-item"><span class="text-white">/</span></li>
            <li class="list-inline-item"><a href="#" class="text-white-50">Our blog</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section blog-wrap bg-gray">
  <div class="container">

    <!-- ðŸ”Ž Search bar -->
    <div class="row mb-5">
      <div class="col-lg-6 mx-auto">
        <form method="get" class="d-flex">
          <input 
            type="text" 
            name="q" 
            class="form-control me-2" 
            placeholder="Search articles..." 
            value="{{ request.GET.q|default:'' }}">
          <button type="submit" class="btn btn-main">Search</button>
        </form>
      </div>
    </div>
    <!-- End Search bar -->

    <div class="row">
      {% for blog in blogs %}
      <div class="col-lg-6 col-md-6 mb-5">
        <div class="blog-item">
          <img src="{{blog.img.url}}" alt="" class="img-fluid rounded">

          <div class="blog-item-content bg-white p-5">
            <div class="blog-item-meta bg-gray py-1 px-2">
              <span class="text-muted text-capitalize mr-3"><i class="ti-pencil-alt mr-2"></i>{{blog.user}}</span>
              <span class="text-muted text-capitalize mr-3"><i class="ti-comment mr-2"></i>{{blog.category}}</span>
              <span class="text-black text-capitalize mr-3"><i class="ti-time mr-1"></i> {{blog.created_at}}</span>
            </div> 

            <h3 class="mt-3 mb-3">
              <a href="{% url 'blog:detail-blog' blog.pk blog.slug %}">{{blog.title}}</a>
            </h3>
            <p class="mb-4">{{blog.desc}}</p>

            <a href="{% url 'blog:detail-blog' blog.pk blog.slug %}" class="btn btn-small btn-main btn-round-full">Learn More</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

<div class="row justify-content-center mt-5">
  <div class="col-lg-6 text-center">
    {% if is_paginated %}
      <nav class="navigation pagination d-inline-block">
        <div class="nav-links">

          {% if page_obj.has_previous %}
            <a class="prev page-numbers" href="?page={{ page_obj.previous_page_number }}">Prev</a>
          {% endif %}

          {% for num in paginator.page_range %}
            {% if page_obj.number == num %}
              <span aria-current="page" class="page-numbers current">{{ num }}</span>
            {% else %}
              <a class="page-numbers" href="?page={{ num }}">{{ num }}</a>
            {% endif %}
          {% endfor %}

          {% if page_obj.has_next %}
            <a class="next page-numbers" href="?page={{ page_obj.next_page_number }}">Next</a>
          {% endif %}

        </div>
      </nav>
    {% endif %}
  </div>
</div>

  </div>
</section>
{% endblock content %}
